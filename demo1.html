<html>

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
    #ani {
      display: inline-block;
      height: 48px;
      width: 48px;
    }
  </style>
</head>

<body>
  <div id="app">
    <div id='ani'></div>
  </div>
</body>
<script>

  function Animation(option) {
    this.$el = document.querySelector(option.el);
    this.$trajectory = option.trajectory || [];
    this.$backgroundUrl = option.backgroundUrl || '';
    this.$cycleTime = option.cycleTime || 2000;
    this.$setInterval = null;
    this.init()
  }

  Animation.prototype.init = function () {
    this.$el.style.backgroundImage = 'url(' + this.$backgroundUrl + ')';
    this.$el.style.backgroundRepeat = 'no-repeat';

  }
  Animation.prototype.createAnimation = function () {
    if (this.$trajectory == undefined) {
      return
    }
    var step = this.$trajectory.length;
    var trajectory = this.$trajectory;
    var _this = this;
    var count = 0;
    this.$setInterval = window.setInterval(function () {
      console.log(_this.$el)
      _this.$el.style.backgroundPositionX = trajectory[count].x + 'px';
      _this.$el.style.backgroundPositionY = trajectory[count].y + 'px';
      count++;
      if (count >= step) {
        count = 0
        // window.clearInterval(_this.$setInterval);
      }

    }, this.$cycleTime / step)

  }
  var option = {
    el: '#ani',
    backgroundUrl: './img/loading.png',
    cycleTime: 2000,
    trajectory: [{
      x: 3,
      y: 0
    }, {
      x: -261,
      y: 0
    }, {
      x: -393,
      y: 0
    },
    {
      x: -437,
      y: 0
    }, {
      x: -877,
      y: 0
    }, {
      x: -921,
      y: 0
    }, {
      x: -1317,
      y: 0
    }, {
      x: -1757,
      y: 0
    }, {
      x: -2021,
      y: 0
    }, {
      x: 3,
      y: 0
    }]
  }
  var animation = new Animation(option);
  animation.createAnimation();
</script>

</html>